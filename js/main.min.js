"use strict";var burger=document.querySelector(".burger"),menu=document.querySelector(".menu"),header=document.querySelector(".header"),popupProduct=document.querySelector(".popup-product"),productLink=document.querySelectorAll(".product-link"),toBasket=document.querySelector(".popup-product__to-basket"),productAmountElement=document.querySelector(".lock__value"),basket=document.querySelector(".basket"),basketIcon=document.querySelector(".lock"),formFind=document.querySelector(".form-find"),productAmount=0;burger.addEventListener("click",(function(){menu.classList.toggle("active"),header.classList.toggle("_menu"),burger.classList.toggle("active"),document.body.classList.toggle("no-scroll")}));var showPopupProduct=function(){popupProduct.classList.contains("active")||(basket.style.top="-150vh",basket.style.opacity="0",popupProduct.classList.add("active"),productAmount++,productAmountElement.innerHTML=productAmount,setTimeout((function(){popupProduct.classList.remove("active")}),5e3))},buildPopupProduct=function(e,t,o,n){popupProduct.classList.contains("active")||(document.querySelector(".popup-product__image").innerHTML=e,document.querySelector(".popup-product__title").innerHTML=t,document.querySelector(".popup-product__subtitle").innerHTML=o,document.querySelector(".popup-product__price").innerHTML=n)},addProductToBasket=function(e,t,o){if(!popupProduct.classList.contains("active")){var n=document.createElement("li");n.classList.add("basket__item"),n.innerHTML='<article class="basket__product product-basket">\n\t\t<div class="product-basket__image">\n\t\t\t'.concat(e,'\n\t\t</div>\n\t\t<h3 class="product-basket__title">').concat(t,'</h3>\n\t\t<span class="product-basket__price">').concat(o,'</span>\n\t\t<button class="product-basket__btn"></button>\n\t</article>'),basket.append(n)}},hideProductsInBasket=function(){basket.style.top="-150vh",basket.style.opacity="0"};function init(){var e=new ymaps.Map("map",{center:[55.755797269899254,37.61457581349182],zoom:15}),t=ymaps.templateLayoutFactory.createClass("<div class='my-hint'>{{ properties.hintContent }}</div>",{getShape:function(){var e=this.getElement(),t=null;if(e){var o=e.firstChild;t=new ymaps.shape.Rectangle(new ymaps.geometry.pixel.Rectangle([[0,0],[o.offsetWidth,o.offsetHeight]]))}return t}}),o=new ymaps.GeoObject({geometry:{type:"Point",coordinates:[55.755773068976765,37.614608000000004]},properties:{hintContent:"Манежная площадь, 1 к2"}},{iconLayout:"default#image",iconImageHref:"../day11/icons/icons.svg#map",iconImageSize:[45,45],hintLayout:t}),n=new ymaps.GeoObject({geometry:{type:"Point",coordinates:[59.93603406416598,30.3147275]},properties:{hintContent:"​Малая Морская, 4"}},{iconLayout:"default#image",iconImageHref:"../day11/icons/icons.svg#map",iconImageSize:[45,45],hintLayout:t}),a=new ymaps.GeoObject({geometry:{type:"Point",coordinates:[53.207388571205435,50.19790299999996]},properties:{hintContent:"​Дыбенко, 30"}},{iconLayout:"default#image",iconImageHref:"../day11/icons/icons.svg#map",iconImageSize:[45,45],hintLayout:t}),i=new ymaps.GeoObject({geometry:{type:"Point",coordinates:[55.82957756889806,49.11858599999993]},properties:{hintContent:"Ямашева проспект, 46"}},{iconLayout:"default#image",iconImageHref:"../day11/icons/icons.svg#map",iconImageSize:[45,45],hintLayout:t}),r=new ymaps.GeoObject({geometry:{type:"Point",coordinates:[54.71805156995343,20.5000935]},properties:{hintContent:"Театральная, 30"}},{iconLayout:"default#image",iconImageHref:"../day11/icons/icons.svg#map",iconImageSize:[45,45],hintLayout:t});e.geoObjects.add(o),e.geoObjects.add(n),e.geoObjects.add(a),e.geoObjects.add(i),e.geoObjects.add(r);var c={moscow:["москва",o.geometry._coordinates],samara:["самара",a.geometry._coordinates],peterburg:["санкт-петербург",n.geometry._coordinates],kazan:["казань",i.geometry._coordinates],kaliningrad:["калининград",r.geometry._coordinates]};formFind.addEventListener("submit",(function(t){t.preventDefault(),function(){var t=document.querySelector(".form-find__input").value.toLowerCase();for(var o in c){if(t.includes(c[o][0])){e.setCenter(c[o][1],15,{checkZoomRange:!0}),document.querySelector(".form-find__message").classList.remove("active");break}document.querySelector(".form-find__message").classList.add("active")}}()}))}productLink.forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault();var t=this.parentNode.querySelector(".image-container").innerHTML,o=this.parentNode.querySelector(".jewelry__link").innerHTML,n=this.parentNode.querySelector(".jewelry__subtitle").innerHTML,a=this.parentNode.querySelector(".jewelry__price").innerHTML;buildPopupProduct(t,o,n,a),addProductToBasket(t,o,a),showPopupProduct()}))})),toBasket.addEventListener("click",(function(){window.scrollTo({behavior:"smooth",left:0,top:0}),popupProduct.classList.remove("active")})),basket.addEventListener("click",(function(e){e.target.classList.contains("product-basket__btn")&&(e.target.closest(".basket__item").remove(),productAmount--,productAmountElement.innerHTML=productAmount)})),basketIcon.addEventListener("mouseover",(function(){if(basket.firstElementChild){var e=this.offsetTop+this.offsetHeight-2;basket.style.top="".concat(e,"px"),basket.style.opacity="1"}})),basketIcon.addEventListener("mouseout",(function(e){e.relatedTarget.closest(".basket")||hideProductsInBasket()})),basket.addEventListener("mouseout",(function(e){e.relatedTarget.closest(".basket")||hideProductsInBasket()})),ymaps.ready(init);var mySwiper=new Swiper(".slider-social",{speed:400,spaceBetween:25,slidesPerView:3,loop:!0,pagination:{el:".swiper-pagination",type:"bullets"},navigation:{nextEl:".btn-right",prevEl:".btn-left"},breakpoints:{320:{slidesPerView:1,spaceBetween:20},401:{slidesPerView:2,spaceBetween:20},769:{slidesPerView:3,spaceBetween:25}}}),validateForm=function(e,t){new window.JustValidate(e,{rules:t})};validateForm(".subscribe__form",{email:{required:!0,email:!0}}),validateForm(".form-footer",{email:{required:!0,email:!0}}),validateForm(".form-footer_1",{email:{required:!0,email:!0}});